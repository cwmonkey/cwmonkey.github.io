!function(){var e,t,n,a,l,o,r,i=!1,s='<link rel="stylesheet" id="trello-swimlane-navigation-css"/>';$css=$(s).appendTo("head"),$css.attr({href:window.cwmBookmarkletUrl+"/trello-swimlane-navigation.css?2"});var c=function(){return"undefined"==typeof jQuery?void setTimeout(c,500):void function(s){s(function(){if(e=s("#board"),n=s(".board-canvas"),l=s("#content"),t=s(".board-wrapper"),a=e.find(".list"),o=e.find(".list-card"),r=s("#trello-swimlane-navigation-css"),!(r.length&&("loaded"==r.css("content")||'"loaded"'==r.css("content"))&&l.length&&t.length&&n.length&&e.length&&a.length&&o.length))return void setTimeout(c,500);var d=s("<menu/>").addClass("lane-menu u-fancy-scrollbar"),m=localStorage.getItem("order:"+document.location.pathname.split("/")[2]),f=null;if(m&&(m=JSON.parse(m),f={}),$members=s(".board-widget--members"),a.each(function(){var e=s(this),t=e.find(".list-header-name").text();if(t){var n=t.split(/[ \-]/),a=n[0],l=$members.find('img[alt^="'+a+'"], img[alt^="'+a.toLowerCase()+'"], .member-initials[title^="'+a+'"], .member-initials[title^="'+a.toLowerCase()+'"]'),o=s("<button/>").html('<span class="lane-menu-name">'+t+"</span>");l.length&&o.prepend(l.eq(0).clone()),o.data("target",e),m?f[t]=o:d.append(o)}}),m){for(var p=0;p<m.length;p++){var u=f[m[p]];d.append(u),f[m[p]]=""}for(var g in f)f.hasOwnProperty(g)&&""!=f[g]&&d.append(f[g])}var v=s("<div/>").addClass("lane-menu-wrapper");l.prepend(v.append(d));var h=v.width();if(l.css({"padding-left":h+10}),d.delegate("button","click",function(t){t.preventDefault();var n=s(this),a=n.data("target"),l=a.position().left+e.scrollLeft();e.animate({scrollLeft:l},"fast"),localStorage.setItem("scrollToLeft",l)}).sortable({items:"> button",cancel:"",stop:function(){var e=d.find("button"),t=[];e.each(function(){var e=s(this);t.push(e.find(".lane-menu-name").text())}),localStorage.setItem("order:"+document.location.pathname.split("/")[2],JSON.stringify(t))}}).disableSelection(),!i){i=!0;var b=!1;e.bind("scroll",function(){b||(b=!0,setTimeout(function(){localStorage.setItem("scrollToLeft",e.scrollLeft()),b=!1},100))});var w=localStorage.getItem("scrollToLeft");w&&e.animate({scrollLeft:w},"fast")}var L=setInterval(function(){v.parent().length||(v.remove(),clearInterval(L),c())},500)})}(window.jQuery)};c()}();