!function(){var t,e,n,a,o,l,r,i=!1,s='<link rel="stylesheet" id="trello-swimlane-navigation-css"/>';$css=$(s).appendTo("head"),$css.attr({href:window.cwmBookmarkletUrl+"/trello-swimlane-navigation.css?1"});var c=function(){return"undefined"==typeof jQuery?void setTimeout(c,500):void function(s){s(function(){if(t=s("#board"),n=s(".board-canvas"),o=s("#content"),e=s(".board-wrapper"),a=t.find(".list"),l=t.find(".list-card"),r=s("#trello-swimlane-navigation-css"),!(r.length&&("loaded"==r.css("content")||'"loaded"'==r.css("content"))&&o.length&&e.length&&n.length&&t.length&&a.length&&l.length))return void setTimeout(c,500);var d=s("<menu/>").addClass("lane-menu"),f=localStorage.getItem("order:"+document.location.pathname),u=null;if(f&&(f=JSON.parse(f),u={}),a.each(function(){var t=s(this),e=t.find(".list-header-name").text();if(e){var n=s("<button/>").html(e);n.data("target",t),f?u[e]=n:d.append(n)}}),f){for(var m=0;m<f.length;m++){var v=u[f[m]];d.append(v),u[f[m]]=""}for(var h in u)u.hasOwnProperty(h)&&""!=u[h]&&d.append(u[h])}o.prepend(d);var g=d.width();if(o.css({"padding-left":g+10}),d.delegate("button","click",function(e){e.preventDefault();var n=s(this),a=n.data("target"),o=a.position().left+t.scrollLeft();t.animate({scrollLeft:o},"fast"),localStorage.setItem("scrollToLeft",o)}).sortable({items:"> button",cancel:"",stop:function(){var t=d.find("button"),e=[];t.each(function(){var t=s(this);e.push(t.html())}),localStorage.setItem("order:"+document.location.pathname,JSON.stringify(e))}}).disableSelection(),!i){i=!0;var p=!1;t.bind("scroll",function(){p||(p=!0,setTimeout(function(){localStorage.setItem("scrollToLeft",t.scrollLeft()),p=!1},100))});var w=localStorage.getItem("scrollToLeft");w&&t.animate({scrollLeft:w},"fast")}var b=setInterval(function(){d.parent().length||(d.remove(),clearInterval(b),c())},500)})}(window.jQuery)};c()}();